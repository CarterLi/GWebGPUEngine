(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(module,exports,__webpack_require__){"use strict";__webpack_require__(52),Object.defineProperty(exports,"__esModule",{value:!0}),exports.TearDownSystem=exports.CleanupSystem=exports.ExecuteSystem=exports.InitializeSystem=void 0;var _class,_class2,_temp,_class3,_class4,_temp2,_class5,_class6,_temp3,_class7,_class8,_temp4,_inversify=__webpack_require__(143);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var InitializeSystem=(0,_inversify.injectable)()((_temp=_class2=function InitializeSystem(){_classCallCheck(this,InitializeSystem),this.name=void 0,this.type=InitializeSystem.TYPE},_class2.TYPE="InitializeSystem",_class=_temp))||_class;exports.InitializeSystem=InitializeSystem;var ExecuteSystem=(0,_inversify.injectable)()((_temp2=_class4=function ExecuteSystem(){_classCallCheck(this,ExecuteSystem),this.name=void 0,this.type=ExecuteSystem.TYPE},_class4.TYPE="ExecuteSystem",_class3=_temp2))||_class3;exports.ExecuteSystem=ExecuteSystem;var CleanupSystem=(0,_inversify.injectable)()((_temp3=_class6=function CleanupSystem(){_classCallCheck(this,CleanupSystem),this.name=void 0,this.type=CleanupSystem.TYPE},_class6.TYPE="CleanupSystem",_class5=_temp3))||_class5;exports.CleanupSystem=CleanupSystem;var TearDownSystem=(0,_inversify.injectable)()((_temp4=_class8=function TearDownSystem(){_classCallCheck(this,TearDownSystem),this.name=void 0,this.type=TearDownSystem.TYPE},_class8.TYPE="TearDownSystem",_class7=_temp4))||_class7;exports.TearDownSystem=TearDownSystem},198:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComponentManager=exports.Component=void 0;exports.Component=function Component(){_classCallCheck(this,Component)};var ComponentManager=function(){function ComponentManager(clazz){_classCallCheck(this,ComponentManager),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=clazz}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ComponentManager,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(entity){return-1<this.lookup[entity]}},{key:"create",value:function(entity,data){this.lookup[entity]=this.components.length;var component=new this.clazz(data||{});return this.components.push(component),this.entities.push(entity),component}},{key:"remove",value:function(entity){var componentIndex=this.lookup[entity];-1<componentIndex&&componentIndex<this.components.length-1&&(this.components[componentIndex]=this.components[this.components.length-1],this.entities[componentIndex]=this.entities[this.entities.length-1],this.lookup[this.entities[componentIndex]]=componentIndex),this.components.pop(),this.entities.pop(),delete this.lookup[entity]}},{key:"removeKeepSorted",value:function(entity){var componentIndex=this.lookup[entity];if(-1<componentIndex){var entity2=this.entities[componentIndex];if(componentIndex<this.components.length-1){for(var i=componentIndex+1;i<this.components.length;++i)this.components[i-1]=this.components[i];for(var _i=componentIndex+1;_i<this.entities.length;++_i)this.entities[_i-1]=this.entities[_i],this.lookup[this.entities[_i-1]]=_i-1}this.components.pop(),this.entities.pop(),delete this.lookup[entity2]}}},{key:"moveItem",value:function(srcIndex,destIndex){if(srcIndex!==destIndex){for(var next,srcComponent=this.components[srcIndex],srcEntity=this.entities[srcIndex],direction=srcIndex<destIndex?1:-1,i=srcIndex;i!==destIndex;i+=direction)next=i+direction,this.components[i]=this.components[next],this.entities[i]=this.entities[next],this.lookup[this.entities[i]]=i;this.components[destIndex]=srcComponent,this.entities[destIndex]=srcEntity,this.lookup[srcEntity]=destIndex}}},{key:"getEntity",value:function(index){return this.entities[index]}},{key:"getComponent",value:function(index){return this.components[index]}},{key:"getComponentByEntity",value:function(entity){var componentIndex=this.lookup[entity];return-1<componentIndex?this.components[componentIndex]:null}},{key:"getCount",value:function(){return this.components.length}}]),ComponentManager}();exports.ComponentManager=ComponentManager},199:function(module,exports,__webpack_require__){"use strict";__webpack_require__(13),__webpack_require__(19),__webpack_require__(11),Object.defineProperty(exports,"__esModule",{value:!0}),exports.IDENTIFIER=void 0;var IDENTIFIER={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),CameraComponentManager:Symbol("CameraComponentManager"),Systems:Symbol("Systems"),World:Symbol("World"),SceneGraphSystem:Symbol("SceneGraphSystem")};exports.IDENTIFIER=IDENTIFIER},316:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cubeVertexArray=exports.cubeUVOffset=exports.cubeColorOffset=exports.cubePositionOffset=exports.cubeVertexSize=void 0;exports.cubeVertexSize=40;exports.cubePositionOffset=0;exports.cubeColorOffset=16;exports.cubeUVOffset=32;var cubeVertexArray=new Float32Array([1,-1,1,1,1,0,1,1,1,1,-1,-1,1,1,0,0,1,1,0,1,-1,-1,-1,1,0,0,0,1,0,0,1,-1,-1,1,1,0,0,1,1,0,1,-1,1,1,1,0,1,1,1,1,-1,-1,-1,1,0,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,-1,1,1,1,0,1,1,0,1,1,-1,-1,1,1,0,0,1,0,0,1,1,-1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,0,0,1,0,0,-1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,-1,1,1,1,0,1,0,0,-1,1,-1,1,0,1,0,1,1,0,-1,1,1,1,0,1,1,1,1,1,1,1,-1,1,1,1,0,1,0,0,-1,-1,1,1,0,0,1,1,1,1,-1,1,1,1,0,1,1,1,0,1,-1,1,-1,1,0,1,0,1,0,0,-1,-1,-1,1,0,0,0,1,1,0,-1,-1,1,1,0,0,1,1,1,1,-1,1,-1,1,0,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,-1,1,1,1,0,1,1,1,0,1,-1,-1,1,1,0,0,1,1,0,0,-1,-1,1,1,0,0,1,1,0,0,1,-1,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,0,0,1,1,1,-1,-1,-1,1,0,0,0,1,0,1,-1,1,-1,1,0,1,0,1,0,0,1,1,-1,1,1,1,0,1,1,0,1,-1,-1,1,1,0,0,1,1,1,-1,1,-1,1,0,1,0,1,0,0]);exports.cubeVertexArray=cubeVertexArray},322:function(module,exports,__webpack_require__){__webpack_require__(323),__webpack_require__(468),module.exports=__webpack_require__(469)},387:function(module,exports){},469:function(module,exports,__webpack_require__){"use strict";(function(module){__webpack_require__(470);var _react=__webpack_require__(247),_theming=__webpack_require__(655);(0,_react.addParameters)({options:{isFullscreen:!1,showAddonsPanel:!0,showSearchBox:!1,panelPosition:"bottom",hierarchySeparator:/\./,enableShortcuts:!0,theme:(0,_theming.create)({base:"light",brandTitle:"WebGPU Engine",brandUrl:"https://github.com/xiaoiver/GWebGPUEngine",gridCellSize:12})}});var req=__webpack_require__(672);(0,_react.configure)((function loadStories(){req.keys().forEach(req)}),module)}).call(this,__webpack_require__(87)(module))},470:function(module,exports,__webpack_require__){var api=__webpack_require__(471),content=__webpack_require__(472);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},472:function(module,exports,__webpack_require__){(exports=__webpack_require__(473)(!1)).push([module.i,"html,body{margin:0}.dg.ac{z-index:999 !important}\n",""]),module.exports=exports},54:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Component",{enumerable:!0,get:function(){return _ComponentManager.Component}}),Object.defineProperty(exports,"ComponentManager",{enumerable:!0,get:function(){return _ComponentManager.ComponentManager}}),Object.defineProperty(exports,"createEntity",{enumerable:!0,get:function(){return _Entity.createEntity}}),Object.defineProperty(exports,"Entity",{enumerable:!0,get:function(){return _Entity.Entity}}),Object.defineProperty(exports,"IDENTIFIER",{enumerable:!0,get:function(){return _identifier.IDENTIFIER}}),Object.defineProperty(exports,"container",{enumerable:!0,get:function(){return _inversify.container}}),Object.defineProperty(exports,"lazyInject",{enumerable:!0,get:function(){return _inversify.lazyInject}}),Object.defineProperty(exports,"lazyMultiInject",{enumerable:!0,get:function(){return _inversify.lazyMultiInject}}),Object.defineProperty(exports,"CleanupSystem",{enumerable:!0,get:function(){return _System.CleanupSystem}}),Object.defineProperty(exports,"ExecuteSystem",{enumerable:!0,get:function(){return _System.ExecuteSystem}}),Object.defineProperty(exports,"InitializeSystem",{enumerable:!0,get:function(){return _System.InitializeSystem}}),Object.defineProperty(exports,"System",{enumerable:!0,get:function(){return _System.System}}),Object.defineProperty(exports,"TearDownSystem",{enumerable:!0,get:function(){return _System.TearDownSystem}}),Object.defineProperty(exports,"World",{enumerable:!0,get:function(){return _World.World}});var _ComponentManager=__webpack_require__(198),_Entity=__webpack_require__(675),_identifier=__webpack_require__(199),_inversify=__webpack_require__(676),_System=__webpack_require__(144),_World=__webpack_require__(714)},672:function(module,exports,__webpack_require__){var map={"./base.stories.tsx":673};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=672},673:function(module,exports,__webpack_require__){"use strict";(function(module){function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var _react=__webpack_require__(247),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(3)),_RotatingCube=_interopRequireDefault(__webpack_require__(674)),_RotatingCubeWithRecordBundle=_interopRequireDefault(__webpack_require__(752)),_TriangleMSAA=_interopRequireDefault(__webpack_require__(753)),_Flocking=_interopRequireDefault(__webpack_require__(754));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function _getRequireWildcardCache(){return cache},cache}var withSourceLoader=__webpack_require__(317).withSource,__STORY__=(__webpack_require__(317).addSource,"import { storiesOf } from '@storybook/react';\nimport * as React from 'react';\nimport RotatingCube from './BasicSamples/RotatingCube';\nimport RotatingCubeWithRecordBundle from './BasicSamples/RotatingCubeWithRecordBundle';\nimport TriangleMSAA from './BasicSamples/TriangleMSAA';\nimport Flocking from './GPGPU/Flocking';\n\n// @ts-ignore\nstoriesOf('BasicSamples', module)\n  .add('TriangleMSAA', () => <TriangleMSAA />)\n  .add('RotatingCube', () => <RotatingCube />)\n  .add('RotatingCubeWithRecordBundle', () => <RotatingCubeWithRecordBundle />);\nstoriesOf('GPGPU', module).add('Flocking', () => <Flocking />);\n"),__ADDS_MAP__={"basicsamples--rotatingcubewithrecordbundle":{startLoc:{col:7,line:12},endLoc:{col:77,line:12},startBody:{col:39,line:12},endBody:{col:77,line:12}},"basicsamples--rotatingcube":{startLoc:{col:7,line:11},endLoc:{col:45,line:11},startBody:{col:23,line:11},endBody:{col:45,line:11}},"basicsamples--trianglemsaa":{startLoc:{col:7,line:10},endLoc:{col:45,line:10},startBody:{col:23,line:10},endBody:{col:45,line:10}},"gpgpu--flocking":{startLoc:{col:31,line:13},endLoc:{col:61,line:13},startBody:{col:43,line:13},endBody:{col:61,line:13}}},__MODULE_DEPENDENCIES__=[],__LOCAL_DEPENDENCIES__={},__IDS_TO_FRAMEWORKS__={};(0,_react.storiesOf)("BasicSamples",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/base.stories.tsx",__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__,"/Users/pyq/workspace/webgpu/GWebGPUEngine/stories",__IDS_TO_FRAMEWORKS__)).add("TriangleMSAA",(function(){return React.createElement(_TriangleMSAA.default,null)})).add("RotatingCube",(function(){return React.createElement(_RotatingCube.default,null)})).add("RotatingCubeWithRecordBundle",(function(){return React.createElement(_RotatingCubeWithRecordBundle.default,null)})),(0,_react.storiesOf)("GPGPU",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/base.stories.tsx",__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__,"/Users/pyq/workspace/webgpu/GWebGPUEngine/stories",__IDS_TO_FRAMEWORKS__)).add("Flocking",(function(){return React.createElement(_Flocking.default,null)}))}).call(this,__webpack_require__(87)(module))},674:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _gWebgpuCore=__webpack_require__(54),_glMatrix=__webpack_require__(80),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(3)),_cube=__webpack_require__(316);function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function _getRequireWildcardCache(){return cache},cache}var _extendStatics,stageDescriptor,pipelineLayout,camera,uniformBuffer,uniformBindGroup,verticesBuffer,__extends=(_extendStatics=function extendStatics(d,b){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function sent(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},_default=(_glMatrix.mat4.create(),function(_super){function RotatingCube(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(RotatingCube,_super),RotatingCube.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var canvas,_this=this;return __generator(this,(function(_a){return(canvas=document.getElementById("application"))&&(this.world=new _gWebgpuCore.World(canvas,{onInit:function onInit(engine){return __awaiter(_this,void 0,void 0,(function(){var uniformsBindGroupLayout;return __generator(this,(function(_a){switch(_a.label){case 0:return"\n            layout(set = 0, binding = 0) uniform Uniforms {\n              mat4 modelViewProjectionMatrix;\n            } uniforms;\n\n            layout(location = 0) in vec4 position;\n            layout(location = 1) in vec4 color;\n\n            layout(location = 0) out vec4 fragColor;\n\n            void main() {\n              gl_Position = uniforms.modelViewProjectionMatrix * position;\n              fragColor = color;\n            }\n            ","\n            layout(location = 0) in vec4 fragColor;\n            layout(location = 0) out vec4 outColor;\n\n            void main() {\n              outColor = fragColor;\n            }\n            ",[4,engine.compilePipelineStageDescriptor("\n            layout(set = 0, binding = 0) uniform Uniforms {\n              mat4 modelViewProjectionMatrix;\n            } uniforms;\n\n            layout(location = 0) in vec4 position;\n            layout(location = 1) in vec4 color;\n\n            layout(location = 0) out vec4 fragColor;\n\n            void main() {\n              gl_Position = uniforms.modelViewProjectionMatrix * position;\n              fragColor = color;\n            }\n            ","\n            layout(location = 0) in vec4 fragColor;\n            layout(location = 0) out vec4 outColor;\n\n            void main() {\n              outColor = fragColor;\n            }\n            ",null)];case 1:return stageDescriptor=_a.sent(),verticesBuffer=engine.createVertexBuffer(_cube.cubeVertexArray),uniformsBindGroupLayout=engine.getDevice().createBindGroupLayout({bindings:[{binding:0,visibility:1,type:"uniform-buffer"}]}),pipelineLayout=engine.getDevice().createPipelineLayout({bindGroupLayouts:[uniformsBindGroupLayout]}),uniformBuffer=engine.createUniformBuffer(new Float32Array(16)),uniformBindGroup=engine.getDevice().createBindGroup({layout:uniformsBindGroupLayout,bindings:[{binding:0,resource:{buffer:uniformBuffer}}]}),[2]}}))}))},onUpdate:function onUpdate(engine){return __awaiter(_this,void 0,void 0,(function(){return __generator(this,(function(_a){return engine.clear({r:0,g:0,b:0,a:1},!0,!0,!0),engine.setSubData(uniformBuffer,0,this.getTransformationMatrix()),engine.bindVertexInputs({indexBuffer:null,vertexStartSlot:0,vertexBuffers:[verticesBuffer],vertexOffsets:[0]}),engine.setRenderBindGroups([uniformBindGroup]),engine.drawArraysType("render",__assign(__assign({layout:pipelineLayout},stageDescriptor),{primitiveTopology:"triangle-list",vertexState:{vertexBuffers:[{arrayStride:_cube.cubeVertexSize,stepMode:"vertex",attributes:[{shaderLocation:0,offset:_cube.cubePositionOffset,format:"float4"},{shaderLocation:1,offset:_cube.cubeColorOffset,format:"float4"}]}]},rasterizationState:{cullMode:"back"},depthStencilState:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus-stencil8"}}),0,36,1),[2]}))}))}}),(camera=this.world.createCamera({aspect:Math.abs(canvas.width/canvas.height),angle:72,far:100,near:1})).setPosition(0,-5,-5)),[2]}))}))},RotatingCube.prototype.componentWillUnmount=function(){this.world&&this.world.destroy()},RotatingCube.prototype.render=function(){return React.createElement("canvas",{id:"application",width:"600",height:"600",style:{pointerEvents:"none"}})},RotatingCube.prototype.getTransformationMatrix=function(){camera.rotate(1,0,0);var viewMatrix=camera.getViewTransform(),modelViewProjectionMatrix=_glMatrix.mat4.create();return _glMatrix.mat4.multiply(modelViewProjectionMatrix,camera.perspective,viewMatrix),modelViewProjectionMatrix},RotatingCube}(React.Component));exports.default=_default},675:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEntity=function createEntity(){return entitySequence++};var entitySequence=0},676:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lazyMultiInject=exports.lazyInject=exports.container=void 0,__webpack_require__(677);var _inversify=__webpack_require__(143),_inversifyInjectDecorators=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(704)),_ComponentManager=__webpack_require__(198),_CameraComponent=__webpack_require__(706),_System=__webpack_require__(710),_HierarchyComponent=__webpack_require__(711),_System2=__webpack_require__(712),_TransformComponent=__webpack_require__(713),_identifier=__webpack_require__(199);var container=new _inversify.Container;exports.container=container;var DECORATORS=(0,_inversifyInjectDecorators.default)(container,!1);exports.lazyInject=function(serviceIdentifier){var original=DECORATORS.lazyInject(serviceIdentifier);return function(proto,key,descriptor){original.call(this,proto,key),descriptor&&(descriptor.initializer=function(){return proto[key]})}};exports.lazyMultiInject=function(serviceIdentifier){var original=DECORATORS.lazyMultiInject(serviceIdentifier);return function(proto,key,descriptor){original.call(this,proto,key),descriptor&&(descriptor.initializer=function(){return proto[key]})}},container.bind(_identifier.IDENTIFIER.HierarchyComponentManager).toConstantValue(new _ComponentManager.ComponentManager(_HierarchyComponent.HierarchyComponent)),container.bind(_identifier.IDENTIFIER.TransformComponentManager).toConstantValue(new _ComponentManager.ComponentManager(_TransformComponent.TransformComponent)),container.bind(_identifier.IDENTIFIER.CameraComponentManager).toConstantValue(new _ComponentManager.ComponentManager(_CameraComponent.CameraComponent)),container.bind(_identifier.IDENTIFIER.Systems).to(_System2.SceneGraphSystem).inSingletonScope(),container.bind(_identifier.IDENTIFIER.Systems).to(_System.CameraSystem).inSingletonScope()},706:function(module,exports,__webpack_require__){"use strict";__webpack_require__(13),__webpack_require__(19),__webpack_require__(22),__webpack_require__(16),__webpack_require__(50),__webpack_require__(67),__webpack_require__(11),__webpack_require__(23),__webpack_require__(24),Object.defineProperty(exports,"__esModule",{value:!0}),exports.CameraComponent=exports.CAMERA_TRACKING_MODE=exports.CAMERA_TYPE=void 0;var CAMERA_TYPE,CAMERA_TRACKING_MODE,_glMatrix=__webpack_require__(80),_=__webpack_require__(54),_math=__webpack_require__(707),_Landmark=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(709));function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}exports.CAMERA_TYPE=CAMERA_TYPE,function(CAMERA_TYPE){CAMERA_TYPE.ORBITING="ORBITING",CAMERA_TYPE.EXPLORING="EXPLORING",CAMERA_TYPE.TRACKING="TRACKING"}(CAMERA_TYPE||(exports.CAMERA_TYPE=CAMERA_TYPE={})),exports.CAMERA_TRACKING_MODE=CAMERA_TRACKING_MODE,function(CAMERA_TRACKING_MODE){CAMERA_TRACKING_MODE.DEFAULT="DEFAULT",CAMERA_TRACKING_MODE.ROTATIONAL="ROTATIONAL",CAMERA_TRACKING_MODE.TRANSLATIONAL="TRANSLATIONAL",CAMERA_TRACKING_MODE.CINEMATIC="CINEMATIC"}(CAMERA_TRACKING_MODE||(exports.CAMERA_TRACKING_MODE=CAMERA_TRACKING_MODE={}));var DEG_2_RAD=Math.PI/180,RAD_2_DEG=180/Math.PI,CameraComponent=function(_Component){function CameraComponent(data){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CameraComponent),(_this=_possibleConstructorReturn(this,_getPrototypeOf(CameraComponent).call(this,data))).matrix=_glMatrix.mat4.create(),_this.right=_glMatrix.vec3.fromValues(1,0,0),_this.up=_glMatrix.vec3.fromValues(0,1,0),_this.forward=_glMatrix.vec3.fromValues(0,0,1),_this.position=_glMatrix.vec3.fromValues(0,0,1),_this.focalPoint=_glMatrix.vec3.fromValues(0,0,0),_this.distanceVector=_glMatrix.vec3.fromValues(0,0,0),_this.distance=1,_this.azimuth=0,_this.elevation=0,_this.roll=0,_this.relAzimuth=0,_this.relElevation=0,_this.relRoll=0,_this.dollyingStep=0,_this.rotateWorld=!1,_this.fov=30,_this.near=.1,_this.far=1e4,_this.aspect=1,_this.perspective=_glMatrix.mat4.create(),_this.following=void 0,_this.type=CAMERA_TYPE.EXPLORING,_this.trackingMode=CAMERA_TRACKING_MODE.DEFAULT,_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(CameraComponent,_Component),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(CameraComponent,[{key:"setType",value:function(type,trackingMode){this.type=type,this.type===CAMERA_TYPE.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===CAMERA_TYPE.TRACKING&&void 0!==trackingMode&&this.setTrackingMode(trackingMode)}},{key:"setTrackingMode",value:function(trackingMode){if(this.type!==CAMERA_TYPE.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");this.trackingMode=trackingMode}},{key:"setWorldRotation",value:function(flag){this.rotateWorld=flag,this._getAngles()}},{key:"getViewTransform",value:function(){return _glMatrix.mat4.invert(_glMatrix.mat4.create(),this.matrix)}},{key:"setMatrix",value:function(matrix){this.matrix=matrix,this._update()}},{key:"setPerspective",value:function(near,far,angle,aspect){this.fov=angle,this.near=near,this.far=far,this.aspect=aspect,this.updatePerspective()}},{key:"updatePerspective",value:function(){_glMatrix.mat4.perspective(this.perspective,this.fov*DEG_2_RAD,this.aspect,this.near,this.far)}},{key:"setPosition",value:function(x,y,z){return this._setPosition(x,y,z),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(x,y,z){var up=_glMatrix.vec3.fromValues(0,1,0);if(this.focalPoint=(0,_math.createVec3)(x,y,z),this.trackingMode===CAMERA_TRACKING_MODE.CINEMATIC){var d=_glMatrix.vec3.subtract(_glMatrix.vec3.create(),this.focalPoint,this.position);x=d[0],y=d[1],z=d[2];var r=_glMatrix.vec3.length(d),el=Math.asin(y/r)*RAD_2_DEG,az=90+Math.atan2(z,x)*RAD_2_DEG,m=_glMatrix.mat4.create();_glMatrix.mat4.rotateY(m,m,az*DEG_2_RAD),_glMatrix.mat4.rotateX(m,m,el*DEG_2_RAD),up=_glMatrix.vec3.transformMat4(_glMatrix.vec3.create(),[0,1,0],m)}return _glMatrix.mat4.invert(this.matrix,_glMatrix.mat4.lookAt(_glMatrix.mat4.create(),this.position,this.focalPoint,up)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(d){if(!(this.distance===d||0>d)){this.distance=d,this.dollyingStep=this.distance/100;var pos=_glMatrix.vec3.create(),n=this.forward,f=this.focalPoint;return pos[0]=d*n[0]+f[0],pos[1]=d*n[1]+f[1],pos[2]=d*n[2]+f[2],this._setPosition(pos),this}}},{key:"changeAzimuth",value:function(az){return this.setAzimuth(this.azimuth+az),this}},{key:"changeElevation",value:function(el){return this.setElevation(this.elevation+el),this}},{key:"changeRoll",value:function(rl){return this.setRoll(this.roll+rl),this}},{key:"setAzimuth",value:function(az){return this.azimuth=(0,_math.getAngle)(az),this.computeMatrix(),this._getAxes(),this.type===CAMERA_TYPE.ORBITING||this.type===CAMERA_TYPE.EXPLORING?this._getPosition():this.type===CAMERA_TYPE.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(el){return this.elevation=(0,_math.getAngle)(el),this.computeMatrix(),this._getAxes(),this.type===CAMERA_TYPE.ORBITING||this.type===CAMERA_TYPE.EXPLORING?this._getPosition():this.type===CAMERA_TYPE.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(angle){return this.roll=(0,_math.getAngle)(angle),this.computeMatrix(),this._getAxes(),this.type===CAMERA_TYPE.ORBITING||this.type===CAMERA_TYPE.EXPLORING?this._getPosition():this.type===CAMERA_TYPE.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(azimuth,elevation,roll){if(this.type===CAMERA_TYPE.EXPLORING){azimuth=(0,_math.getAngle)(azimuth),elevation=(0,_math.getAngle)(elevation),roll=(0,_math.getAngle)(roll);var rotX=_glMatrix.quat.setAxisAngle(_glMatrix.quat.create(),[1,0,0],(this.rotateWorld?1:-1)*elevation*DEG_2_RAD),rotY=_glMatrix.quat.setAxisAngle(_glMatrix.quat.create(),[0,1,0],(this.rotateWorld?1:-1)*azimuth*DEG_2_RAD),rotZ=_glMatrix.quat.setAxisAngle(_glMatrix.quat.create(),[0,0,1],roll*DEG_2_RAD),rotQ=_glMatrix.quat.multiply(_glMatrix.quat.create(),rotY,rotX);rotQ=_glMatrix.quat.multiply(_glMatrix.quat.create(),rotQ,rotZ);var rotMatrix=_glMatrix.mat4.fromQuat(_glMatrix.mat4.create(),rotQ);_glMatrix.mat4.translate(this.matrix,this.matrix,[0,0,-this.distance]),_glMatrix.mat4.multiply(this.matrix,this.matrix,rotMatrix),_glMatrix.mat4.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(90<Math.abs(this.elevation+elevation))return;this.relElevation=(0,_math.getAngle)(elevation),this.relAzimuth=(0,_math.getAngle)(azimuth),this.relRoll=(0,_math.getAngle)(roll),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===CAMERA_TYPE.ORBITING||this.type===CAMERA_TYPE.EXPLORING?this._getPosition():this.type===CAMERA_TYPE.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(tx,ty){var coords=(0,_math.createVec3)(tx,ty,0),pos=_glMatrix.vec3.clone(this.position);return _glMatrix.vec3.add(pos,pos,_glMatrix.vec3.scale(_glMatrix.vec3.create(),this.right,coords[0])),_glMatrix.vec3.add(pos,pos,_glMatrix.vec3.scale(_glMatrix.vec3.create(),this.up,coords[1])),this._setPosition(pos),this}},{key:"dolly",value:function(value){var n=this.forward,pos=_glMatrix.vec3.clone(this.position),step=value*this.dollyingStep;return pos[0]+=step*n[0],pos[1]+=step*n[1],pos[2]+=step*n[2],this._setPosition(pos),this.type===CAMERA_TYPE.ORBITING||this.type===CAMERA_TYPE.EXPLORING?this._getDistance():this.type===CAMERA_TYPE.TRACKING&&_glMatrix.vec3.add(this.focalPoint,pos,this.distanceVector),this}},{key:"createLandmark",value:function(name){return new _Landmark.default(name,this)}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var rotX,rotY,rotZ=_glMatrix.quat.setAxisAngle(_glMatrix.quat.create(),[0,0,1],this.roll*DEG_2_RAD);_glMatrix.mat4.identity(this.matrix),rotX=_glMatrix.quat.setAxisAngle(_glMatrix.quat.create(),[1,0,0],(this.rotateWorld||this.type===CAMERA_TYPE.TRACKING?1:-1)*this.elevation*DEG_2_RAD),rotY=_glMatrix.quat.setAxisAngle(_glMatrix.quat.create(),[0,1,0],(this.rotateWorld?1:-1)*this.azimuth*DEG_2_RAD);var rotQ=_glMatrix.quat.multiply(_glMatrix.quat.create(),rotY,rotX);rotQ=_glMatrix.quat.multiply(_glMatrix.quat.create(),rotQ,rotZ);var rotMatrix=_glMatrix.mat4.fromQuat(_glMatrix.mat4.create(),rotQ);this.type===CAMERA_TYPE.ORBITING||this.type===CAMERA_TYPE.EXPLORING?(_glMatrix.mat4.translate(this.matrix,this.matrix,this.focalPoint),_glMatrix.mat4.multiply(this.matrix,this.matrix,rotMatrix),_glMatrix.mat4.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===CAMERA_TYPE.TRACKING&&(_glMatrix.mat4.translate(this.matrix,this.matrix,this.position),_glMatrix.mat4.multiply(this.matrix,this.matrix,rotMatrix))}},{key:"_setPosition",value:function(x,y,z){this.position=(0,_math.createVec3)(x,y,z);var m=this.matrix;m[12]=this.position[0],m[13]=this.position[1],m[14]=this.position[2],m[15]=1}},{key:"_getAxes",value:function(){_glMatrix.vec3.copy(this.right,(0,_math.createVec3)(_glMatrix.vec4.transformMat4(_glMatrix.vec4.create(),[1,0,0,0],this.matrix))),_glMatrix.vec3.copy(this.up,(0,_math.createVec3)(_glMatrix.vec4.transformMat4(_glMatrix.vec4.create(),[0,1,0,0],this.matrix))),_glMatrix.vec3.copy(this.forward,(0,_math.createVec3)(_glMatrix.vec4.transformMat4(_glMatrix.vec4.create(),[0,0,1,0],this.matrix))),_glMatrix.vec3.normalize(this.right,this.right),_glMatrix.vec3.normalize(this.up,this.up),_glMatrix.vec3.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var x=this.distanceVector[0],y=this.distanceVector[1],z=this.distanceVector[2],r=_glMatrix.vec3.length(this.distanceVector);if(0===r)return this.elevation=0,void(this.azimuth=0);this.type===CAMERA_TYPE.TRACKING||this.rotateWorld?(this.elevation=Math.asin(y/r)*RAD_2_DEG,this.azimuth=Math.atan2(-x,-z)*RAD_2_DEG):(this.elevation=-Math.asin(y/r)*RAD_2_DEG,this.azimuth=-Math.atan2(-x,-z)*RAD_2_DEG)}},{key:"_getPosition",value:function(){_glMatrix.vec3.copy(this.position,(0,_math.createVec3)(_glMatrix.vec4.transformMat4(_glMatrix.vec4.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){_glMatrix.vec3.transformMat3(this.distanceVector,[0,0,-this.distance],_glMatrix.mat3.fromMat4(_glMatrix.mat3.create(),this.matrix)),_glMatrix.vec3.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=_glMatrix.vec3.subtract(_glMatrix.vec3.create(),this.focalPoint,this.position),this.distance=_glMatrix.vec3.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),CameraComponent}(_.Component);exports.CameraComponent=CameraComponent},707:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAngle=function getAngle(angle){if(void 0===angle)return 0;if(360<angle||-360>angle)return angle%360;return angle},exports.createVec3=function createVec3(x,y,z){if((0,_isNumber2.default)(x))return _glMatrix.vec3.fromValues(x,y,z);if(3===x.length)return _glMatrix.vec3.clone(x);return _glMatrix.vec3.fromValues(x[0],x[1],x[2])};var _isNumber2=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(708)),_glMatrix=__webpack_require__(80)},709:function(module,exports,__webpack_require__){"use strict";__webpack_require__(52),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _glMatrix=__webpack_require__(80);function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}var Landmark=function(){function Landmark(name,c){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Landmark),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=name,this.matrix=_glMatrix.mat4.clone(c.matrix),this.right=_glMatrix.vec3.clone(c.right),this.up=_glMatrix.vec3.clone(c.up),this.forward=_glMatrix.vec3.clone(c.forward),this.position=_glMatrix.vec3.clone(c.position),this.focalPoint=_glMatrix.vec3.clone(c.focalPoint),this.distanceVector=_glMatrix.vec3.clone(c.distanceVector),this.azimuth=c.azimuth,this.elevation=c.elevation,this.roll=c.roll,this.relAzimuth=c.relAzimuth,this.relElevation=c.relElevation,this.relRoll=c.relRoll,this.dollyingStep=c.dollyingStep,this.distance=c.distance}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Landmark,[{key:"retrieve",value:function(c){c.matrix=_glMatrix.mat4.copy(c.matrix,this.matrix),c.right=_glMatrix.vec3.copy(c.right,this.right),c.up=_glMatrix.vec3.copy(c.up,this.up),c.forward=_glMatrix.vec3.copy(c.forward,this.forward),c.position=_glMatrix.vec3.copy(c.position,this.position),c.focalPoint=_glMatrix.vec3.copy(c.focalPoint,this.focalPoint),c.distanceVector=_glMatrix.vec3.copy(c.distanceVector,this.distanceVector),c.azimuth=this.azimuth,c.elevation=this.elevation,c.roll=this.roll,c.relAzimuth=this.relAzimuth,c.relElevation=this.relElevation,c.relRoll=this.relRoll,c.dollyingStep=this.dollyingStep,c.distance=this.distance}}]),Landmark}();exports.default=Landmark},710:function(module,exports,__webpack_require__){"use strict";__webpack_require__(13),__webpack_require__(19),__webpack_require__(22),__webpack_require__(28),__webpack_require__(33),__webpack_require__(16),__webpack_require__(107),__webpack_require__(92),__webpack_require__(52),__webpack_require__(50),__webpack_require__(37),__webpack_require__(67),__webpack_require__(11),__webpack_require__(23),__webpack_require__(34),__webpack_require__(24),Object.defineProperty(exports,"__esModule",{value:!0}),exports.CameraSystem=void 0;var _dec,_dec2,_dec3,_class,_class2,_descriptor,_descriptor2,_temp,_inversify=__webpack_require__(143),_=__webpack_require__(54),_System=__webpack_require__(144);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var CameraSystem=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_.IDENTIFIER.CameraComponentManager),_dec3=(0,_inversify.inject)(_.IDENTIFIER.TransformComponentManager),_dec((_temp=function(_ExecuteSystem){function CameraSystem(){var _getPrototypeOf2,_this;_classCallCheck(this,CameraSystem);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(CameraSystem)).call.apply(_getPrototypeOf2,[this].concat(args)))).name="camera",_initializerDefineProperty(_this,"camera",_descriptor,_assertThisInitialized(_this)),_initializerDefineProperty(_this,"transform",_descriptor2,_assertThisInitialized(_this)),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(CameraSystem,_ExecuteSystem),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(CameraSystem,[{key:"execute",value:function(){}},{key:"createCamera",value:function(cameraParams){var entity=(0,_.createEntity)();this.camera.create(entity,{}),this.transform.create(entity,{});var cameraComponent=this.camera.getComponentByEntity(entity),near=cameraParams.near,far=cameraParams.far,angle=cameraParams.angle,aspect=cameraParams.aspect;return null==cameraComponent||cameraComponent.setPerspective(near,far,angle,aspect),cameraComponent}},{key:"getTransformComponentManager",value:function(){return this.transform}}]),CameraSystem}(_System.ExecuteSystem),_descriptor=_applyDecoratedDescriptor((_class2=_temp).prototype,"camera",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor2=_applyDecoratedDescriptor(_class2.prototype,"transform",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.CameraSystem=CameraSystem},711:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(13),__webpack_require__(19),__webpack_require__(22),__webpack_require__(16),__webpack_require__(50),__webpack_require__(67),__webpack_require__(11),__webpack_require__(23),__webpack_require__(24),Object.defineProperty(exports,"__esModule",{value:!0}),exports.HierarchyComponent=void 0;var HierarchyComponent=function(_Component){function HierarchyComponent(data){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,HierarchyComponent),(_this=_possibleConstructorReturn(this,_getPrototypeOf(HierarchyComponent).call(this,data))).parentID=void 0,_this.parentID=data.parentID||-1,_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(HierarchyComponent,_Component),HierarchyComponent}(__webpack_require__(54).Component);exports.HierarchyComponent=HierarchyComponent},712:function(module,exports,__webpack_require__){"use strict";__webpack_require__(13),__webpack_require__(19),__webpack_require__(22),__webpack_require__(28),__webpack_require__(33),__webpack_require__(16),__webpack_require__(107),__webpack_require__(92),__webpack_require__(52),__webpack_require__(50),__webpack_require__(37),__webpack_require__(67),__webpack_require__(11),__webpack_require__(23),__webpack_require__(34),__webpack_require__(24),Object.defineProperty(exports,"__esModule",{value:!0}),exports.SceneGraphSystem=void 0;var _dec,_dec2,_dec3,_class,_class2,_descriptor,_descriptor2,_temp,_glMatrix=__webpack_require__(80),_inversify=__webpack_require__(143),_=__webpack_require__(54),_System=__webpack_require__(144);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var SceneGraphSystem=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_.IDENTIFIER.HierarchyComponentManager),_dec3=(0,_inversify.inject)(_.IDENTIFIER.TransformComponentManager),_dec((_temp=function(_ExecuteSystem){function SceneGraphSystem(){var _getPrototypeOf2,_this;_classCallCheck(this,SceneGraphSystem);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SceneGraphSystem)).call.apply(_getPrototypeOf2,[this].concat(args)))).name="sceneGraph",_initializerDefineProperty(_this,"hierarchy",_descriptor,_assertThisInitialized(_this)),_initializerDefineProperty(_this,"transform",_descriptor2,_assertThisInitialized(_this)),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(SceneGraphSystem,_ExecuteSystem),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(SceneGraphSystem,[{key:"execute",value:function(){this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){for(var i=0;i<this.transform.getCount();++i)this.transform.getComponent(i).updateTransform()}},{key:"runHierarchyUpdateSystem",value:function(){for(var i=0;i<this.hierarchy.getCount();++i){var parentComponent=this.hierarchy.getComponent(i),entity=this.hierarchy.getEntity(i),transformChild=this.transform.getComponentByEntity(entity),transformParent=this.transform.getComponentByEntity(parentComponent.parentID);null!==transformChild&&null!==transformParent&&transformChild.updateTransformWithParent(transformParent)}}},{key:"attach",value:function(entity,parent,isChildAlreadyInLocalSpace){if(this.hierarchy.contains(entity)&&this.detach(entity),this.hierarchy.create(entity,{parentID:parent}),1<this.hierarchy.getCount())for(var parentCandidateEntity,i=this.hierarchy.getCount()-1;0<i;--i){parentCandidateEntity=this.hierarchy.getEntity(i);for(var j=0;j<i;++j)if(this.hierarchy.getComponent(j).parentID===parentCandidateEntity){this.hierarchy.moveItem(i,j),++i;break}}this.hierarchy.getComponentByEntity(entity);var transformParent=this.transform.getComponentByEntity(parent);null===transformParent&&(transformParent=this.transform.create(parent));var transformChild=this.transform.getComponentByEntity(entity);null===transformChild&&(transformChild=this.transform.create(entity),transformParent=this.transform.getComponentByEntity(parent)),!isChildAlreadyInLocalSpace&&transformParent&&(transformChild.matrixTransform(_glMatrix.mat4.invert(_glMatrix.mat4.create(),transformParent.worldTransform)),transformChild.updateTransform()),transformParent&&transformChild.updateTransformWithParent(transformParent)}},{key:"detach",value:function(entity){if(null!==this.hierarchy.getComponentByEntity(entity)){var transform=this.transform.getComponentByEntity(entity);null!==transform&&transform.applyTransform(),this.hierarchy.removeKeepSorted(entity)}}},{key:"detachChildren",value:function(parent){for(var i=0;i<this.hierarchy.getCount();){var _this$hierarchy$getCo;if((null===(_this$hierarchy$getCo=this.hierarchy.getComponent(i))||void 0===_this$hierarchy$getCo?void 0:_this$hierarchy$getCo.parentID)===parent){var entity=this.hierarchy.getEntity(i);this.detach(entity)}else++i}}}]),SceneGraphSystem}(_System.ExecuteSystem),_descriptor=_applyDecoratedDescriptor((_class2=_temp).prototype,"hierarchy",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor2=_applyDecoratedDescriptor(_class2.prototype,"transform",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.SceneGraphSystem=SceneGraphSystem},713:function(module,exports,__webpack_require__){"use strict";__webpack_require__(13),__webpack_require__(19),__webpack_require__(22),__webpack_require__(16),__webpack_require__(50),__webpack_require__(67),__webpack_require__(11),__webpack_require__(23),__webpack_require__(24),Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransformComponent=void 0;var _glMatrix=__webpack_require__(80);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var TransformComponent=function(_Component){function TransformComponent(data){var _this,rotation,scaling,translation,rts,transformed,quatX,quatY,quatZ,aS,aR,aT,bS,bR,bT;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TransformComponent),(_this=_possibleConstructorReturn(this,_getPrototypeOf(TransformComponent).call(this,data))).dirtyFlag=void 0,_this.localTranslation=_glMatrix.vec3.fromValues(0,0,0),_this.localRotation=_glMatrix.quat.fromValues(0,0,0,1),_this.localScale=_glMatrix.vec3.fromValues(1,1,1),_this.localTransform=_glMatrix.mat4.create(),_this.worldTransform=_glMatrix.mat4.create(),_this.getRotation=(rotation=_glMatrix.quat.create(),function(){return _glMatrix.mat4.getRotation(rotation,_this.worldTransform),rotation}),_this.getScale=(scaling=_glMatrix.vec3.create(),function(){return _glMatrix.mat4.getScaling(scaling,_this.worldTransform),scaling}),_this.getPosition=(translation=_glMatrix.vec3.create(),function(){return _glMatrix.mat4.getTranslation(translation,_this.worldTransform),translation}),_this.getLocalMatrix=(rts=_glMatrix.mat4.create(),function(){return _glMatrix.mat4.fromRotationTranslationScale(rts,_this.localRotation,_this.localTranslation,_this.localScale),rts}),_this.matrixTransform=(transformed=_glMatrix.mat4.create(),function(mat){_glMatrix.mat4.multiply(transformed,_this.getLocalMatrix(),mat),_glMatrix.mat4.getScaling(_this.localScale,transformed),_glMatrix.mat4.getTranslation(_this.localTranslation,transformed),_glMatrix.mat4.getRotation(_this.localRotation,transformed)}),_this.rotateRollPitchYaw=(quatX=_glMatrix.quat.create(),quatY=_glMatrix.quat.create(),quatZ=_glMatrix.quat.create(),function(x,y,z){_this.setDirty(),_glMatrix.quat.fromEuler(quatX,x,0,0),_glMatrix.quat.fromEuler(quatY,0,y,0),_glMatrix.quat.fromEuler(quatZ,0,0,z),_glMatrix.quat.multiply(_this.localRotation,quatX,_this.localRotation),_glMatrix.quat.multiply(_this.localRotation,_this.localRotation,quatY),_glMatrix.quat.multiply(_this.localRotation,quatZ,_this.localRotation),_glMatrix.quat.normalize(_this.localRotation,_this.localRotation)}),_this.lerp=(aS=_glMatrix.vec3.create(),aR=_glMatrix.quat.create(),aT=_glMatrix.vec3.create(),bS=_glMatrix.vec3.create(),bR=_glMatrix.quat.create(),bT=_glMatrix.vec3.create(),function(a,b,t){_this.setDirty(),_glMatrix.mat4.getScaling(aS,a.worldTransform),_glMatrix.mat4.getTranslation(aT,a.worldTransform),_glMatrix.mat4.getRotation(aR,a.worldTransform),_glMatrix.mat4.getScaling(bS,b.worldTransform),_glMatrix.mat4.getTranslation(bT,b.worldTransform),_glMatrix.mat4.getRotation(bR,b.worldTransform),_glMatrix.vec3.lerp(_this.localScale,aS,bS,t),_glMatrix.quat.slerp(_this.localRotation,aR,bR,t),_glMatrix.vec3.lerp(_this.localTranslation,aT,bT,t)}),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(TransformComponent,_Component),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(TransformComponent,[{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var value=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];value?this.dirtyFlag|=TransformComponent.DIRTY:this.dirtyFlag&=~TransformComponent.DIRTY}},{key:"updateTransform",value:function(){this.isDirty()&&(this.setDirty(!1),_glMatrix.mat4.copy(this.worldTransform,this.getLocalMatrix()))}},{key:"updateTransformWithParent",value:function(parent){_glMatrix.mat4.multiply(this.worldTransform,this.getLocalMatrix(),parent.worldTransform)}},{key:"applyTransform",value:function(){this.setDirty(),_glMatrix.mat4.getScaling(this.localScale,this.worldTransform),_glMatrix.mat4.getTranslation(this.localTranslation,this.worldTransform),_glMatrix.mat4.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localTranslation=_glMatrix.vec3.fromValues(0,0,0),this.localRotation=_glMatrix.quat.fromValues(0,0,0,1),this.localScale=_glMatrix.vec3.fromValues(1,1,1)}},{key:"translate",value:function(translation){this.setDirty(),_glMatrix.vec3.add(this.localTranslation,this.localTranslation,translation)}},{key:"scale",value:function(scaling){this.setDirty(),_glMatrix.vec3.multiply(this.localScale,this.localScale,scaling)}},{key:"rotate",value:function(quaternion){this.setDirty(),_glMatrix.quat.multiply(this.localRotation,this.localRotation,quaternion),_glMatrix.quat.normalize(this.localRotation,this.localRotation)}}]),TransformComponent}(__webpack_require__(198).Component);exports.TransformComponent=TransformComponent,TransformComponent.DIRTY=1},714:function(module,exports,__webpack_require__){"use strict";__webpack_require__(13),__webpack_require__(19),__webpack_require__(22),__webpack_require__(122),__webpack_require__(33),__webpack_require__(16),__webpack_require__(52),__webpack_require__(310),__webpack_require__(50),__webpack_require__(67),__webpack_require__(11),__webpack_require__(74),__webpack_require__(23),__webpack_require__(184),__webpack_require__(34),__webpack_require__(24),Object.defineProperty(exports,"__esModule",{value:!0}),exports.World=void 0;var WebGPUConstants=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(311)),_eventemitter=__webpack_require__(289),_=__webpack_require__(54),_identifier=__webpack_require__(199),_System=__webpack_require__(144),_WebGPUEngine=__webpack_require__(715);function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var World=function(_EventEmitter){function World(canvas,options){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,World),(_this=_possibleConstructorReturn(this,_getPrototypeOf(World).call(this))).systems=void 0,_this.engine=void 0,_this.inited=!1,_this.onInit=void 0,_this.onUpdate=void 0,_this.rafHandle=void 0,_this.useRenderBundle=!1,_this.renderBundleRecorded=!1,_this.renderBundle=void 0,_this.update=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _this.systems.forEach((function(system){system.type===_System.ExecuteSystem.TYPE&&system.execute()})),_this.systems.forEach((function(system){system.type===_System.CleanupSystem.TYPE&&system.cleanup()})),_context.next=4,_this.render();case 4:_this.rafHandle=window.requestAnimationFrame(_this.update);case 5:case"end":return _context.stop()}}),_callee)}))),navigator.gpu?(_this.engine=new _WebGPUEngine.WebGPUEngine(canvas,{swapChainFormat:WebGPUConstants.TextureFormat.BGRA8Unorm,antialiasing:!0}),_this.systems=_.container.getAll(_identifier.IDENTIFIER.Systems),_this.init(canvas),_this.onInit=options.onInit,_this.onUpdate=options.onUpdate,_this.useRenderBundle=!!options.useRenderBundle,_this):(window.alert("WebGPU is not supported by your browser."),_possibleConstructorReturn(_this))}var _render,_init;return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(World,_EventEmitter),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(World,[{key:"createCamera",value:function(cameraParams){var cameraSystem=this.systems.find((function(s){return"camera"===s.name}));return cameraSystem?cameraSystem.createCamera(cameraParams):null}},{key:"init",value:(_init=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(canvas){return regeneratorRuntime.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,this.engine.init();case 2:this.systems.forEach((function(system){system.type===_System.InitializeSystem.TYPE&&system.initialize(canvas)})),this.update();case 4:case"end":return _context2.stop()}}),_callee2,this)}))),function(){return _init.apply(this,arguments)})},{key:"destroy",value:function(){this.off("init"),this.off("update"),this.engine.dispose(),this.systems.forEach((function(system){system.type===_System.TearDownSystem.TYPE&&system.tearDown()})),window.cancelAnimationFrame(this.rafHandle)}},{key:"render",value:(_render=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(this.engine.beginFrame(),this.inited){_context3.next=6;break}return this.emit("init",this.engine),_context3.next=5,this.onInit(this.engine);case 5:this.inited=!0;case 6:if(!this.useRenderBundle){_context3.next=16;break}if(this.renderBundleRecorded){_context3.next=13;break}return this.engine.startRecordBundle(),_context3.next=11,this.onUpdate(this.engine);case 11:this.renderBundle=this.engine.stopRecordBundle(),this.renderBundleRecorded=!0;case 13:this.engine.executeBundles([this.renderBundle]),_context3.next=19;break;case 16:return this.emit("update",this.engine),_context3.next=19,this.onUpdate(this.engine);case 19:this.engine.endFrame();case 20:case"end":return _context3.stop()}}),_callee3,this)}))),function(){return _render.apply(this,arguments)})}]),World}(_eventemitter.EventEmitter);exports.World=World},715:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(13),__webpack_require__(19),__webpack_require__(22),__webpack_require__(716),__webpack_require__(130),__webpack_require__(33),__webpack_require__(16),__webpack_require__(717),__webpack_require__(719),__webpack_require__(310),__webpack_require__(720),__webpack_require__(37),__webpack_require__(11),__webpack_require__(74),__webpack_require__(65),__webpack_require__(23),__webpack_require__(721),__webpack_require__(725),__webpack_require__(726),__webpack_require__(728),__webpack_require__(729),__webpack_require__(730),__webpack_require__(731),__webpack_require__(732),__webpack_require__(733),__webpack_require__(734),__webpack_require__(735),__webpack_require__(736),__webpack_require__(737),__webpack_require__(738),__webpack_require__(740),__webpack_require__(741),__webpack_require__(742),__webpack_require__(743),__webpack_require__(744),__webpack_require__(745),__webpack_require__(746),__webpack_require__(747),__webpack_require__(748),__webpack_require__(749),__webpack_require__(750),__webpack_require__(184),__webpack_require__(34),__webpack_require__(24),Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGPUEngine=void 0;var WebGPUConstants=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(311)),_glslang=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(751));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}var WebGPUEngine=function(){function WebGPUEngine(canvas){var options=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,WebGPUEngine),this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.pipelines={},this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.commandBuffers=[,,,].fill(void 0),this.currentRenderPass=null,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.options=void 0,this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.computeEncoderDescriptor={label:"compute"},this.canvas=canvas,this.options=options,this.mainPassSampleCount=options.antialiasing?this.defaultSampleCount:1}var _initGlslang,_compilePipelineStageDescriptor,_compileRawPipelineStageDescriptor,_init;return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(WebGPUEngine,[{key:"getDevice",value:function(){return this.device}},{key:"getSwapChain",value:function(){return this.swapChain}},{key:"init",value:(_init=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.initGlslang();case 2:this.initContextAndSwapChain(),this.initMainAttachments();case 4:case"end":return _context.stop()}}),_callee,this)}))),function(){return _init.apply(this,arguments)})},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor)}},{key:"endFrame",value:function(){this.endRenderPass(),this.options.supportCompute&&this.endComputePass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.commandBuffers[2]=this.computeEncoder.finish(),this.device.defaultQueue.submit(this.commandBuffers),this.tempBuffers.forEach((function(buffer){return buffer.destroy()})),this.tempBuffers=[]}},{key:"startRecordBundle",value:function(){this.bundleEncoder=this.device.createRenderBundleEncoder({colorFormats:[WebGPUConstants.TextureFormat.BGRA8Unorm],depthStencilFormat:WebGPUConstants.TextureFormat.Depth24PlusStencil8,sampleCount:this.mainPassSampleCount})}},{key:"stopRecordBundle",value:function(){var bundle=this.bundleEncoder.finish();return this.bundleEncoder=null,bundle}},{key:"executeBundles",value:function(bundles){var _this$currentRenderPa;this.currentRenderPass||this.startMainRenderPass(),null===(_this$currentRenderPa=this.currentRenderPass)||void 0===_this$currentRenderPa||_this$currentRenderPa.executeBundles(bundles)}},{key:"enableScissor",value:function(x,y,width,height){this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass.setScissorRect(x,y,width,height)}},{key:"disableScissor",value:function(){var _this$currentRenderPa2;this.currentRenderPass||this.startMainRenderPass(),null===(_this$currentRenderPa2=this.currentRenderPass)||void 0===_this$currentRenderPa2||_this$currentRenderPa2.setScissorRect(0,0,this.canvas.width,this.canvas.height)}},{key:"setSize",value:function(){this.initMainAttachments()}},{key:"clear",value:function(color,backBuffer,depth){var stencil=3<arguments.length&&void 0!==arguments[3]&&arguments[3];this.mainColorAttachments[0].loadValue=backBuffer?color:WebGPUConstants.LoadOp.Load,this.mainDepthAttachment.depthLoadValue=depth?this.clearDepthValue:WebGPUConstants.LoadOp.Load,this.mainDepthAttachment.stencilLoadValue=stencil?this.clearStencilValue:WebGPUConstants.LoadOp.Load,this.startMainRenderPass(),this.options.supportCompute&&this.startComputePass()}},{key:"dispose",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy()}},{key:"compileRawPipelineStageDescriptor",value:(_compileRawPipelineStageDescriptor=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(vertexCode,fragmentCode){var vertexShader,fragmentShader;return regeneratorRuntime.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,this.compileRawShaderToSpirV(vertexCode,"vertex");case 2:return vertexShader=_context2.sent,_context2.next=5,this.compileRawShaderToSpirV(fragmentCode,"fragment");case 5:return fragmentShader=_context2.sent,_context2.abrupt("return",this.createPipelineStageDescriptor(vertexShader,fragmentShader));case 7:case"end":return _context2.stop()}}),_callee2,this)}))),function(){return _compileRawPipelineStageDescriptor.apply(this,arguments)})},{key:"compilePipelineStageDescriptor",value:(_compilePipelineStageDescriptor=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(vertexCode,fragmentCode,defines){var shaderVersion,vertexShader,fragmentShader;return regeneratorRuntime.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return shaderVersion="#version 450\n",_context3.next=3,this.compileShaderToSpirV(vertexCode,"vertex",defines,shaderVersion);case 3:return vertexShader=_context3.sent,_context3.next=6,this.compileShaderToSpirV(fragmentCode,"fragment",defines,shaderVersion);case 6:return fragmentShader=_context3.sent,_context3.abrupt("return",this.createPipelineStageDescriptor(vertexShader,fragmentShader));case 8:case"end":return _context3.stop()}}),_callee3,this)}))),function(){return _compilePipelineStageDescriptor.apply(this,arguments)})},{key:"drawElementsType",value:function(pipelineName,descriptor,indexStart,indexCount){var instancesCount=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,renderPass=this.bundleEncoder||this.currentRenderPass;this.setRenderPipeline(pipelineName,descriptor),renderPass.drawIndexed(indexCount,instancesCount,indexStart,0,0)}},{key:"drawArraysType",value:function(pipelineName,descriptor,verticesStart,verticesCount){var instancesCount=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,renderPass=this.bundleEncoder||this.currentRenderPass;this.setRenderPipeline(pipelineName,descriptor),renderPass.draw(verticesCount,instancesCount,verticesStart,0)}},{key:"createVertexBuffer",value:function(data){var view;return view=data instanceof Array?new Float32Array(data):data instanceof ArrayBuffer?new Uint8Array(data):data,this.createBuffer(view,WebGPUConstants.BufferUsage.Vertex|WebGPUConstants.BufferUsage.CopyDst)}},{key:"createUniformBuffer",value:function(data){var view;return view=data instanceof Array?new Float32Array(data):data instanceof ArrayBuffer?new Uint8Array(data):data,this.createBuffer(view,WebGPUConstants.BufferUsage.Uniform|WebGPUConstants.BufferUsage.CopyDst)}},{key:"setRenderBindGroups",value:function(bindGroups){for(var renderPass=this.bundleEncoder||this.currentRenderPass,i=0;i<bindGroups.length;i++)renderPass.setBindGroup(i,bindGroups[i])}},{key:"setSubData",value:function(destBuffer,destOffset,srcArrayBuffer){var byteCount=srcArrayBuffer.byteLength,_this$device$createBu2=_slicedToArray(this.device.createBufferMapped({size:byteCount,usage:WebGPUConstants.BufferUsage.CopySrc}),2),srcBuffer=_this$device$createBu2[0],arrayBuffer=_this$device$createBu2[1];new Uint8Array(arrayBuffer).set(new Uint8Array(srcArrayBuffer.buffer)),srcBuffer.unmap(),this.uploadEncoder.copyBufferToBuffer(srcBuffer,0,destBuffer,destOffset,byteCount),this.tempBuffers.push(srcBuffer)}},{key:"bindVertexInputs",value:function(vertexInputs){var renderPass=this.bundleEncoder||this.currentRenderPass;vertexInputs.indexBuffer&&renderPass.setIndexBuffer(vertexInputs.indexBuffer,vertexInputs.indexOffset);for(var i=0;i<vertexInputs.vertexBuffers.length;i++)vertexInputs.vertexBuffers[i]&&renderPass.setVertexBuffer(vertexInputs.vertexStartSlot+i,vertexInputs.vertexBuffers[i],vertexInputs.vertexOffsets[i])}},{key:"createBuffer",value:function(view,flags){var padding=view.byteLength%4,verticesBufferDescriptor={size:view.byteLength+padding,usage:flags},buffer=this.device.createBuffer(verticesBufferDescriptor);return this.setSubData(buffer,0,view),buffer}},{key:"initGlslang",value:(_initGlslang=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var _navigator,_navigator$gpu;return regeneratorRuntime.wrap((function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,(0,_glslang.default)();case 2:return this.glslang=_context4.sent,_context4.next=5,null===(_navigator=navigator)||void 0===_navigator||null===(_navigator$gpu=_navigator.gpu)||void 0===_navigator$gpu?void 0:_navigator$gpu.requestAdapter();case 5:return this.adapter=_context4.sent,_context4.next=8,this.adapter.requestDevice();case 8:this.device=_context4.sent;case 9:case"end":return _context4.stop()}}),_callee4,this)}))),function(){return _initGlslang.apply(this,arguments)})},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext("gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:WebGPUConstants.TextureUsage.OutputAttachment|WebGPUConstants.TextureUsage.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var mainTextureDescriptor={size:this.mainTextureExtends,arrayLayerCount:1,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:WebGPUConstants.TextureDimension.E2d,format:WebGPUConstants.TextureFormat.BGRA8Unorm,usage:WebGPUConstants.TextureUsage.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(mainTextureDescriptor),this.mainColorAttachments=[{attachment:this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:WebGPUConstants.StoreOp.Store}]}else this.mainColorAttachments=[{attachment:this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:WebGPUConstants.StoreOp.Store}];var depthTextureDescriptor={size:this.mainTextureExtends,arrayLayerCount:1,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:WebGPUConstants.TextureDimension.E2d,format:WebGPUConstants.TextureFormat.Depth24PlusStencil8,usage:WebGPUConstants.TextureUsage.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(depthTextureDescriptor),this.mainDepthAttachment={attachment:this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:WebGPUConstants.StoreOp.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:WebGPUConstants.StoreOp.Store}}},{key:"startComputePass",value:function(){this.currentRenderPass&&this.endRenderPass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&this.endRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment})}},{key:"endRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.currentRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"setRenderPipeline",value:function(name,descriptor){var renderPass=this.bundleEncoder||this.currentRenderPass,pipeline=this.getRenderPipeline(name,descriptor);pipeline&&renderPass.setPipeline(pipeline)}},{key:"compileRawShaderToSpirV",value:function(source,type){return this.glslang.compileGLSL(source,type)}},{key:"compileShaderToSpirV",value:function(source,type,defines,shaderVersion){return this.compileRawShaderToSpirV(shaderVersion+(defines?defines+"\n":"")+source,type)}},{key:"createPipelineStageDescriptor",value:function(vertexShader,fragmentShader){return{vertexStage:{module:this.device.createShaderModule({code:vertexShader}),entryPoint:"main"},fragmentStage:{module:this.device.createShaderModule({code:fragmentShader}),entryPoint:"main"}}}},{key:"getRenderPipeline",value:function(name,descriptor){if(this.pipelines[name])return this.pipelines[name];var primitiveTopology=descriptor.primitiveTopology,rasterizationState=descriptor.rasterizationState,depthStencilState=descriptor.depthStencilState,colorStates=descriptor.colorStates,vertexStage=descriptor.vertexStage,fragmentStage=descriptor.fragmentStage,vertexState=descriptor.vertexState,layout=descriptor.layout;if(vertexStage&&fragmentStage){var renderPipeline=this.device.createRenderPipeline({sampleCount:this.mainPassSampleCount,primitiveTopology:primitiveTopology||"triangle-list",rasterizationState:_objectSpread({},this.getDefaultRasterizationStateDescriptor(),{},rasterizationState),depthStencilState:_objectSpread({},this.getDefaultDepthStencilStateDescriptor(),{},depthStencilState),colorStates:colorStates||this.getDefaultColorStateDescriptors(),layout:layout,vertexStage:vertexStage,fragmentStage:fragmentStage,vertexState:vertexState});return this.pipelines[name]=renderPipeline,renderPipeline}return null}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:WebGPUConstants.FrontFace.CCW,cullMode:WebGPUConstants.CullMode.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"getDefaultDepthStencilStateDescriptor",value:function(){var stencilFrontBack={compare:WebGPUConstants.CompareFunction.Always,depthFailOp:WebGPUConstants.StencilOperation.Keep,failOp:WebGPUConstants.StencilOperation.Keep,passOp:WebGPUConstants.StencilOperation.Keep};return{depthWriteEnabled:!1,depthCompare:WebGPUConstants.CompareFunction.Always,format:WebGPUConstants.TextureFormat.Depth24PlusStencil8,stencilFront:stencilFrontBack,stencilBack:stencilFrontBack,stencilReadMask:4294967295,stencilWriteMask:4294967295}}},{key:"getDefaultColorStateDescriptors",value:function(){return[{format:this.options.swapChainFormat,alphaBlend:{srcFactor:WebGPUConstants.BlendFactor.One,dstFactor:WebGPUConstants.BlendFactor.Zero,operation:WebGPUConstants.BlendOperation.Add},colorBlend:{srcFactor:WebGPUConstants.BlendFactor.One,dstFactor:WebGPUConstants.BlendFactor.Zero,operation:WebGPUConstants.BlendOperation.Add},writeMask:WebGPUConstants.ColorWrite.All}]}}]),WebGPUEngine}();exports.WebGPUEngine=WebGPUEngine},751:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var glslang;function _ref(){return(_ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var glslangModule;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!glslang){_context.next=2;break}return _context.abrupt("return",glslang);case 2:return _context.next=4,import("https://cdn.jsdelivr.net/npm/@webgpu/glslang@0.0.15/dist/web-devel/glslang.js");case 4:return glslangModule=_context.sent,_context.next=7,glslangModule.default();case 7:return glslang=_context.sent,_context.abrupt("return",glslang);case 9:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}__webpack_require__(11),__webpack_require__(74),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function _default(){return _ref.apply(this,arguments)}},752:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _gWebgpuCore=__webpack_require__(54),_glMatrix=__webpack_require__(80),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(3)),_cube=__webpack_require__(316);function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function _getRequireWildcardCache(){return cache},cache}var _extendStatics,stageDescriptor,pipelineLayout,uniformBuffer,uniformBindGroup,verticesBuffer,__extends=(_extendStatics=function extendStatics(d,b){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function sent(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},projectionMatrix=_glMatrix.mat4.create(),_default=function(_super){function RotatingCubeWithRecordBundle(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(RotatingCubeWithRecordBundle,_super),RotatingCubeWithRecordBundle.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var canvas,_this=this;return __generator(this,(function(_a){return(canvas=document.getElementById("application"))&&(this.world=new _gWebgpuCore.World(canvas,{useRenderBundle:!0,onInit:function onInit(engine){return __awaiter(_this,void 0,void 0,(function(){var aspect,uniformsBindGroupLayout;return __generator(this,(function(_a){switch(_a.label){case 0:return"\n            layout(set = 0, binding = 0) uniform Uniforms {\n              mat4 modelViewProjectionMatrix;\n            } uniforms;\n\n            layout(location = 0) in vec4 position;\n            layout(location = 1) in vec4 color;\n\n            layout(location = 0) out vec4 fragColor;\n\n            void main() {\n              gl_Position = uniforms.modelViewProjectionMatrix * position;\n              fragColor = color;\n            }\n            ","\n            layout(location = 0) in vec4 fragColor;\n            layout(location = 0) out vec4 outColor;\n\n            void main() {\n              outColor = fragColor;\n            }\n            ",[4,engine.compilePipelineStageDescriptor("\n            layout(set = 0, binding = 0) uniform Uniforms {\n              mat4 modelViewProjectionMatrix;\n            } uniforms;\n\n            layout(location = 0) in vec4 position;\n            layout(location = 1) in vec4 color;\n\n            layout(location = 0) out vec4 fragColor;\n\n            void main() {\n              gl_Position = uniforms.modelViewProjectionMatrix * position;\n              fragColor = color;\n            }\n            ","\n            layout(location = 0) in vec4 fragColor;\n            layout(location = 0) out vec4 outColor;\n\n            void main() {\n              outColor = fragColor;\n            }\n            ",null)];case 1:return stageDescriptor=_a.sent(),aspect=Math.abs(canvas.width/canvas.height),projectionMatrix=_glMatrix.mat4.create(),_glMatrix.mat4.perspective(projectionMatrix,2*Math.PI/5,aspect,1,100),verticesBuffer=engine.createVertexBuffer(_cube.cubeVertexArray),uniformsBindGroupLayout=engine.getDevice().createBindGroupLayout({bindings:[{binding:0,visibility:1,type:"uniform-buffer"}]}),pipelineLayout=engine.getDevice().createPipelineLayout({bindGroupLayouts:[uniformsBindGroupLayout]}),uniformBuffer=engine.createUniformBuffer(new Float32Array(16)),uniformBindGroup=engine.getDevice().createBindGroup({layout:uniformsBindGroupLayout,bindings:[{binding:0,resource:{buffer:uniformBuffer}}]}),[2]}}))}))},onUpdate:function onUpdate(engine){return __awaiter(_this,void 0,void 0,(function(){return __generator(this,(function(_a){return engine.clear({r:0,g:0,b:0,a:1},!0,!0,!0),engine.setSubData(uniformBuffer,0,this.getTransformationMatrix()),engine.bindVertexInputs({indexBuffer:null,vertexStartSlot:0,vertexBuffers:[verticesBuffer],vertexOffsets:[0]}),engine.setRenderBindGroups([uniformBindGroup]),engine.drawArraysType("render",__assign(__assign({layout:pipelineLayout},stageDescriptor),{primitiveTopology:"triangle-list",vertexState:{vertexBuffers:[{arrayStride:_cube.cubeVertexSize,stepMode:"vertex",attributes:[{shaderLocation:0,offset:_cube.cubePositionOffset,format:"float4"},{shaderLocation:1,offset:_cube.cubeColorOffset,format:"float4"}]}]},rasterizationState:{cullMode:"back"},depthStencilState:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus-stencil8"}}),0,36,1),[2]}))}))}})),[2]}))}))},RotatingCubeWithRecordBundle.prototype.componentWillUnmount=function(){this.world&&this.world.destroy()},RotatingCubeWithRecordBundle.prototype.render=function(){return React.createElement("canvas",{id:"application",width:"600",height:"600",style:{pointerEvents:"none"}})},RotatingCubeWithRecordBundle.prototype.getTransformationMatrix=function(){var viewMatrix=_glMatrix.mat4.create();_glMatrix.mat4.translate(viewMatrix,viewMatrix,_glMatrix.vec3.fromValues(0,0,-5));var now=Date.now()/1e3;_glMatrix.mat4.rotate(viewMatrix,viewMatrix,1,_glMatrix.vec3.fromValues(Math.sin(now),Math.cos(now),0));var modelViewProjectionMatrix=_glMatrix.mat4.create();return _glMatrix.mat4.multiply(modelViewProjectionMatrix,projectionMatrix,viewMatrix),modelViewProjectionMatrix},RotatingCubeWithRecordBundle}(React.Component);exports.default=_default},753:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _gWebgpuCore=__webpack_require__(54),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(3));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function _getRequireWildcardCache(){return cache},cache}var _extendStatics,stageDescriptor,__extends=(_extendStatics=function extendStatics(d,b){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function sent(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},_default=function(_super){function TriangleMSAA(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(TriangleMSAA,_super),TriangleMSAA.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var canvas,_this=this;return __generator(this,(function(_a){return(canvas=document.getElementById("application"))&&(this.world=new _gWebgpuCore.World(canvas,{onInit:function onInit(engine){return __awaiter(_this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return"\n            const vec2 pos[3] = vec2[3](vec2(0.0f, 0.5f), vec2(-0.5f, -0.5f), vec2(0.5f, -0.5f));\n            void main() {\n                gl_Position = vec4(pos[gl_VertexIndex], 0.0, 1.0);\n            }\n          ","\n            layout(location = 0) out vec4 outColor;\n            void main() {\n                outColor = vec4(1.0, 0.0, 0.0, 1.0);\n            }\n          ",[4,engine.compilePipelineStageDescriptor("\n            const vec2 pos[3] = vec2[3](vec2(0.0f, 0.5f), vec2(-0.5f, -0.5f), vec2(0.5f, -0.5f));\n            void main() {\n                gl_Position = vec4(pos[gl_VertexIndex], 0.0, 1.0);\n            }\n          ","\n            layout(location = 0) out vec4 outColor;\n            void main() {\n                outColor = vec4(1.0, 0.0, 0.0, 1.0);\n            }\n          ",null)];case 1:return stageDescriptor=_a.sent(),[2]}}))}))},onUpdate:function onUpdate(engine){return __awaiter(_this,void 0,void 0,(function(){return __generator(this,(function(_a){return engine.clear({r:0,g:0,b:0,a:1},!0,!0,!0),engine.drawArraysType("render",__assign(__assign({layout:engine.getDevice().createPipelineLayout({bindGroupLayouts:[]})},stageDescriptor),{primitiveTopology:"triangle-list"}),0,3,1),[2]}))}))}})),[2]}))}))},TriangleMSAA.prototype.componentWillUnmount=function(){this.world&&this.world.destroy()},TriangleMSAA.prototype.render=function(){return React.createElement("canvas",{id:"application",width:"600",height:"600",style:{pointerEvents:"none"}})},TriangleMSAA}(React.Component);exports.default=_default},754:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _gWebgpuCore=__webpack_require__(54),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(3));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function _getRequireWildcardCache(){return cache},cache}var _extendStatics,stageDescriptor,__extends=(_extendStatics=function extendStatics(d,b){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function sent(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},_default=function(_super){function Flocking(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Flocking,_super),Flocking.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var canvas,_this=this;return __generator(this,(function(_a){return(canvas=document.getElementById("application"))&&(this.world=new _gWebgpuCore.World(canvas,{onInit:function onInit(engine){return __awaiter(_this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return"\n            const vec2 pos[3] = vec2[3](vec2(0.0f, 0.5f), vec2(-0.5f, -0.5f), vec2(0.5f, -0.5f));\n            void main() {\n                gl_Position = vec4(pos[gl_VertexIndex], 0.0, 1.0);\n            }\n          ","\n            layout(location = 0) out vec4 outColor;\n            void main() {\n                outColor = vec4(1.0, 0.0, 0.0, 1.0);\n            }\n          ",[4,engine.compilePipelineStageDescriptor("\n            const vec2 pos[3] = vec2[3](vec2(0.0f, 0.5f), vec2(-0.5f, -0.5f), vec2(0.5f, -0.5f));\n            void main() {\n                gl_Position = vec4(pos[gl_VertexIndex], 0.0, 1.0);\n            }\n          ","\n            layout(location = 0) out vec4 outColor;\n            void main() {\n                outColor = vec4(1.0, 0.0, 0.0, 1.0);\n            }\n          ",null)];case 1:return stageDescriptor=_a.sent(),[2]}}))}))},onUpdate:function onUpdate(engine){return __awaiter(_this,void 0,void 0,(function(){return __generator(this,(function(_a){return engine.clear({r:0,g:0,b:0,a:1},!0,!0,!0),engine.drawArraysType("render",__assign(__assign({layout:engine.getDevice().createPipelineLayout({bindGroupLayouts:[]})},stageDescriptor),{primitiveTopology:"triangle-list"}),0,3,1),[2]}))}))}})),[2]}))}))},Flocking.prototype.componentWillUnmount=function(){this.world&&this.world.destroy()},Flocking.prototype.render=function(){return React.createElement("canvas",{id:"application",width:"600",height:"600",style:{pointerEvents:"none"}})},Flocking}(React.Component);exports.default=_default}},[[322,1,2]]]);
//# sourceMappingURL=main.7c19f4b701cc7f753371.bundle.js.map